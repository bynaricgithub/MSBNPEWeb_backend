"use strict";(self.webpackChunkmnc_frontend=self.webpackChunkmnc_frontend||[]).push([[439],{4439:(e,a,s)=>{s.r(a),s.d(a,{default:()=>u});var t=s(9324),l=s(4959),i=s(3939),d=s(9950),n=s(2902),r=s(2776),m=s(9262),o=s(7965),c=s(9671),g=s(1261),h=s(4414);const u=()=>{var e;const[a,s]=(0,d.useState)(),[u,x]=(0,d.useState)(!1),[v,p]=(0,d.useState)(),[j,b]=(0,d.useState)({modal:!1,data:""});return(0,d.useEffect)((()=>{y()}),[u,j]),(0,h.jsxs)("div",{className:"px-3",children:[(0,h.jsx)("div",{className:"text-center p-2",children:(0,h.jsx)("h3",{children:"Manage Slider Images"})}),(0,h.jsxs)("button",{type:"button",className:"btn rounded-5 btn-success ",onClick:e=>{p(!1),x(!0)},children:[(0,h.jsx)(l.g,{icon:t.QLR})," Add Slider Image"]}),(0,h.jsx)("div",{className:"depttableSection my-3",children:a?(null===a||void 0===a?void 0:a.length)>0&&(0,h.jsx)(g.A,{data:a,columns:[{text:"Sr.No.",dataField:"srno"},{text:"Title",dataField:"header"},{text:"Image",dataField:"imgPreview"},{text:"AlterNate Name",dataField:"alternate_name"},{text:"Order ID",dataField:"order_id"},{text:"Actions",dataField:"actions"}],keyField:"srno",headerClasses:"admin-allTable_header",sortingTable:"home_page_slider",getData:y}):(0,h.jsx)(o.A,{})}),(0,h.jsxs)(n.A,{show:u,onHide:e=>x(!1),centered:!0,size:"lg",children:[(0,h.jsx)(n.A.Header,{className:"bgTheme text-light",children:(0,h.jsxs)(n.A.Title,{children:[v?"Edit":"Add Slider Image"," ",null===v||void 0===v?void 0:v.title," "]})}),(0,h.jsx)(n.A.Body,{children:(0,h.jsx)(i.l1,{initialValues:{id:(null===v||void 0===v?void 0:v.id)||"",alternate_name:(null===v||void 0===v?void 0:v.alternate_name)||"",order_id:(null===v||void 0===v?void 0:v.order_id)||"",imageName:(null===v||void 0===v?void 0:v.imageName)||"",header:(null===v||void 0===v?void 0:v.header)||""},enableReinitialize:!0,onSubmit:e=>{v?async function(e){if(e.image){const a=await(0,c.aj)(e.image);e.image=a}try{let a=(await m.A.put("/slider-images/update",e)).data;x(!1),(0,c.WU)({message:a.message,displayClass:a.status})}catch(t){var a,s;(0,c.WU)({message:(null===(a=t.response.data)||void 0===a?void 0:a.message)||(null===(s=t.response)||void 0===s?void 0:s.message),displayClass:"failure"})}}({...e,oldImage:null===v||void 0===v?void 0:v.image}):async function(e){if(!e.image)return(0,c.WU)({message:"Please Select an Image.",displayClass:"danger"}),!1;delete e.imageName;const a=await(0,c.aj)(e.image);e.image=a;let s=new FormData;Object.keys(e).forEach((a=>{s.append(a,e[a])}));const t={headers:{"content-type":"multipart/form-data"}};try{let e=(await m.A.post("/slider-images/add",s,t)).data;x(!1),(0,c.WU)({message:e.message,displayClass:e.status})}catch(d){var l,i;(0,c.WU)({message:(null===(l=d.response.data)||void 0===l?void 0:l.message)||(null===(i=d.response)||void 0===i?void 0:i.message),displayClass:"failure"})}}({...e})},children:e=>{let{values:a,handleChange:s,setFieldValue:t}=e;return(0,h.jsxs)(i.lV,{children:[(0,h.jsxs)("div",{className:"row",children:[[{name:"header",heading:"Title"},{name:"alternate_name",heading:"Alternate Name"}].map(((e,s)=>(0,h.jsx)("div",{className:"col-12",children:(0,h.jsxs)("div",{className:"form-floating mb-3",children:[(0,h.jsx)(i.D0,{id:"floating"+e.name,name:e.name,type:"text",value:a[e.name],className:"form-control",placeholder:e.name}),(0,h.jsx)("label",{htmlFor:"floating"+e.name,children:e.heading}),(0,h.jsx)(i.Kw,{name:e.name,children:e=>(0,h.jsx)("span",{className:"text-danger font-12",children:e})})]})},s))),(0,h.jsx)("div",{className:"col-sm-12",children:(0,h.jsxs)("div",{className:"form-floating mb-3",children:[(0,h.jsx)(i.D0,{id:"floatingImage",name:"imageName",type:"file",onChange:e=>{s(e),t("image",e.currentTarget.files[0])},value:a.imageName,className:"form-control ",placeholder:"Image",accept:"image/*"}),(0,h.jsx)("label",{htmlFor:"floatingImage",children:"Image"}),(0,h.jsx)(i.Kw,{name:"image",children:e=>(0,h.jsx)("span",{className:"text-danger font-12",children:e})})]})}),!a.image&&(0,h.jsx)("div",{className:"col-sm-12",children:(0,h.jsx)("div",{className:"text-center text-secondary",children:"No image selected"})}),a.image&&(0,h.jsx)("div",{className:"col-sm-6 overflow-scroll",children:(0,h.jsx)("img",{src:a.image&&URL.createObjectURL(a.image),alt:"selectedImage",className:"p-1 ",height:200})})]}),(0,h.jsx)("hr",{}),(0,h.jsxs)("div",{className:"text-center py-3",children:[(0,h.jsx)("button",{type:"submit",className:"btn btn-primary mx-2",children:"Submit"}),(0,h.jsx)("button",{type:"button",className:"btn btn-danger mx-2",onClick:e=>x(!1),children:"Close"})]})]})}})})]}),(0,h.jsxs)(n.A,{show:j.modal,centered:!0,onHide:e=>b({modal:!1,data:""}),children:[(0,h.jsx)(n.A.Header,{children:(0,h.jsx)(n.A.Title,{children:"Delete"})}),(0,h.jsxs)(n.A.Body,{children:["Do you really want to delete ?",(0,h.jsx)("br",{}),"Alternate Name : ",(0,h.jsx)("b",{children:null===(e=j.data)||void 0===e?void 0:e.title})]}),(0,h.jsxs)(n.A.Footer,{children:[(0,h.jsx)("button",{type:"button",className:"btn btn-danger",onClick:e=>{!async function(e){try{await(0,c.Wi)(e.image);let a=(await m.A.delete("/slider-images/delete",{params:{id:e.id}})).data;b({modal:!1,data:""}),(0,c.WU)({message:a.message,displayClass:a.status})}catch(t){var a,s;(0,c.WU)({message:(null===(a=t.response.data)||void 0===a?void 0:a.message)||(null===(s=t.response)||void 0===s?void 0:s.message),displayClass:"failure"})}}(j.data)},children:"Delete"}),(0,h.jsx)("button",{type:"button",className:"btn btn-primary",onClick:e=>b({modal:!1,data:""}),children:"Cancel"})]})]})]});async function y(){try{let e=(await m.A.get("/admin/slider-images/listing")).data;s(null===e||void 0===e?void 0:e.data.sort(((e,a)=>e.order_id-a.order_id)).map(((e,a)=>({...e,srno:a+1,imgPreview:(0,h.jsx)("img",{src:"https://msbnpe.bynaricexam.com/data/"+e.image,alt:e.alternate_name,style:{width:"20%"}}),actions:(0,h.jsxs)("div",{className:"d-flex justify-content-evenly",children:[(0,h.jsx)("button",{type:"button",className:"btn btn-sm btn-warning",onClick:a=>{p(e),x(!0)},children:(0,h.jsx)(l.g,{icon:t.LFz})}),(0,h.jsx)("button",{type:"button",className:"btn btn-sm btn-danger ms-2",onClick:a=>b({modal:!0,data:e}),children:(0,h.jsx)(l.g,{icon:t.yLS})}),(0,h.jsx)("div",{className:"text-center p-1",children:(0,h.jsx)(r.A.Check,{defaultChecked:1===e.status,type:"switch",id:"custom-switch",onClick:a=>{!async function(e){try{let a=(await m.A.post("/slider-images/disable",e)).data;b({modal:!1,data:""}),(0,c.WU)({message:a.message,displayClass:a.status})}catch(t){var a,s;(0,c.WU)({message:(null===(a=t.response.data)||void 0===a?void 0:a.message)||(null===(s=t.response)||void 0===s?void 0:s.message),displayClass:"failure"})}}({id:e.id,status:a.target.checked?1:0})}})})]})}))))}catch(i){var e,a;(0,c.WU)({message:(null===(e=i.response.data)||void 0===e?void 0:e.message)||(null===(a=i.response)||void 0===a?void 0:a.message),displayClass:"failure"})}}}}}]);