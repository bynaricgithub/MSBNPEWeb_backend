"use strict";(self.webpackChunkmnc_frontend=self.webpackChunkmnc_frontend||[]).push([[80],{4080:(e,a,s)=>{s.r(a),s.d(a,{default:()=>x});var t=s(9324),n=s(4959),l=s(3939),i=s(9950),d=s(2902),o=s(2776),r=s(9262),c=s(7965),m=s(9671),u=s(1261),h=s(4414);const x=()=>{var e;const[a,s]=(0,i.useState)(),[x,p]=(0,i.useState)(!1),[g,b]=(0,i.useState)(),[j,v]=(0,i.useState)({modal:!1,data:""});return(0,i.useEffect)((()=>{y()}),[x,j]),(0,h.jsxs)("div",{className:"px-3",children:[(0,h.jsx)("div",{className:"text-center p-2",children:(0,h.jsx)("h3",{children:"Manage Notice Board"})}),(0,h.jsxs)("button",{type:"button",className:"btn rounded-5 btn-success",onClick:e=>{b(!1),p(!0)},children:[(0,h.jsx)(n.g,{icon:t.QLR})," Add Notice Board"]}),(0,h.jsx)("div",{className:"depttableSection my-3",children:a?(null===a||void 0===a?void 0:a.length)>0&&(0,h.jsx)(u.A,{data:a,columns:[{text:"Sr.No.",dataField:"srno"},{text:"Title",dataField:"title"},{text:"Link",dataField:"link2"},{text:"Order ID",dataField:"order_id"},{text:"Actions",dataField:"actions"}],keyField:"srno",headerClasses:"admin-allTable_header",sortingTable:"notice_boards",getData:y}):(0,h.jsx)(c.A,{})}),(0,h.jsxs)(d.A,{show:x,onHide:e=>p(!1),centered:!0,size:"lg",children:[(0,h.jsx)(d.A.Header,{className:"bgTheme text-light",children:(0,h.jsxs)(d.A.Title,{children:[" ",g?"Edit":"Add Notice Board"," ",null===g||void 0===g?void 0:g.title," "]})}),(0,h.jsx)(d.A.Body,{children:(0,h.jsx)(l.l1,{initialValues:{id:(null===g||void 0===g?void 0:g.id)||"",title:(null===g||void 0===g?void 0:g.title)||"",link:"",linkName:"",imageName:"",type:""},enableReinitialize:!0,onSubmit:e=>{g?async function(e){e.link&&(await(0,m.Wi)(g.link),e.link=await(0,m.aj)(e.link));delete e.linkName;let a=new FormData;Object.keys(e).forEach((s=>{a.append(s,e[s])}));const s={headers:{"content-type":"multipart/form-data"}};try{let e=(await r.A.put("/notice-board/update",a,s)).data;p(!1),(0,m.WU)({message:e.message,displayClass:e.status})}catch(l){var t,n;(0,m.WU)({message:(null===(t=l.response.data)||void 0===t?void 0:t.message)||(null===(n=l.response)||void 0===n?void 0:n.message),displayClass:"failure"})}}({...e}):async function(e){if(!e.link)return(0,m.WU)({message:"Please Select a File.",displayClass:"danger"}),null;e.link=await(0,m.aj)(e.link),delete e.linkName;let a=new FormData;Object.keys(e).forEach((s=>{a.append(s,e[s])}));const s={headers:{"content-type":"multipart/form-data"}};try{let e=(await r.A.post("/notice-board/add",a,s)).data;p(!1),(0,m.WU)({message:e.message,displayClass:e.status})}catch(l){var t,n;(0,m.WU)({message:(null===(t=l.response.data)||void 0===t?void 0:t.message)||(null===(n=l.response)||void 0===n?void 0:n.message),displayClass:"failure"})}}({...e})},children:e=>{let{values:a,handleChange:s,setFieldValue:t}=e;return(0,h.jsxs)(l.lV,{children:[[{name:"title",heading:"Title"}].map(((e,s)=>(0,h.jsx)("div",{children:(0,h.jsxs)("div",{className:"form-floating mb-3",children:[(0,h.jsx)(l.D0,{id:"floating"+e.name,name:e.name,type:"text",value:a[e.name],className:"form-control",placeholder:e.name}),(0,h.jsx)("label",{htmlFor:"floating"+e.name,children:e.heading}),(0,h.jsx)(l.Kw,{name:e.name,children:e=>(0,h.jsx)("span",{className:"text-danger font-12",children:e})})]})},s))),(0,h.jsx)("div",{className:"row",children:(0,h.jsx)("div",{className:"col-sm-12",children:(0,h.jsxs)("div",{className:"form-floating mb-3",children:[(0,h.jsx)(l.D0,{id:"floatingLink",name:"linkName",type:"file",onChange:e=>{s(e),t("link",e.currentTarget.files[0])},value:a.linkName,className:"form-control",accept:".pdf"}),(0,h.jsx)("label",{htmlFor:"floatingLink",children:"PDF File"}),(0,h.jsx)(l.Kw,{name:"link",children:e=>(0,h.jsx)("span",{className:"text-danger font-12",children:e})})]})})}),(0,h.jsx)("hr",{}),(0,h.jsxs)("div",{className:"text-center py-3",children:[(0,h.jsx)("button",{type:"submit",className:"btn btn-primary mx-2",children:"Submit"}),(0,h.jsx)("button",{type:"button",className:"btn btn-danger mx-2",onClick:e=>p(!1),children:"Close"})]})]})}})})]}),(0,h.jsxs)(d.A,{show:j.modal,centered:!0,onHide:e=>v({modal:!1,data:""}),children:[(0,h.jsx)(d.A.Header,{children:(0,h.jsx)(d.A.Title,{children:"Delete"})}),(0,h.jsxs)(d.A.Body,{children:["Do you really want to delete ?",(0,h.jsx)("br",{}),"Title : ",(0,h.jsx)("b",{children:null===(e=j.data)||void 0===e?void 0:e.title})]}),(0,h.jsxs)(d.A.Footer,{children:[(0,h.jsx)("button",{type:"button",className:"btn btn-danger",onClick:e=>{!async function(e){try{await(0,m.Wi)(e.link);let a=(await r.A.delete("/notice-board/delete",{params:{id:e.id}})).data;v({modal:!1,data:""}),(0,m.WU)({message:a.message,displayClass:a.status})}catch(t){var a,s;(0,m.WU)({message:(null===(a=t.response.data)||void 0===a?void 0:a.message)||(null===(s=t.response)||void 0===s?void 0:s.message),displayClass:"failure"})}}(j.data)},children:"Delete"}),(0,h.jsx)("button",{type:"button",className:"btn btn-primary",onClick:e=>v({modal:!1,data:""}),children:"Cancel"})]})]})]});async function y(){try{let e=(await r.A.get("/admin/notice-board/listing")).data;s(null===e||void 0===e?void 0:e.data.sort(((e,a)=>e.order_id-a.order_id)).map(((e,a)=>({...e,srno:a+1,link2:(0,h.jsxs)("a",{href:"https://msbnpe.bynaricexam.com/data/"+e.link,target:"_blank",rel:"noreferrer",className:"text-decoration-none",children:["Open PDF ",(0,h.jsx)(n.g,{icon:t.Ju_})]}),actions:(0,h.jsxs)("div",{className:"d-flex justify-content-evenly",children:[(0,h.jsx)("button",{type:"button",className:"btn btn-sm btn-warning",onClick:a=>{b(e),p(!0)},children:(0,h.jsx)(n.g,{icon:t.LFz})}),(0,h.jsx)("button",{type:"button",className:"btn btn-sm btn-danger ms-2",onClick:a=>v({modal:!0,data:e}),children:(0,h.jsx)(n.g,{icon:t.yLS})}),(0,h.jsx)("div",{className:"text-center p-1",children:(0,h.jsx)(o.A.Check,{defaultChecked:1===e.status,type:"switch",id:"custom-switch",onClick:a=>{!async function(e){try{let a=(await r.A.put("/notice-board/disable",e)).data;v({modal:!1,data:""}),(0,m.WU)({message:a.message,displayClass:a.status})}catch(t){var a,s;(0,m.WU)({message:(null===(a=t.response.data)||void 0===a?void 0:a.message)||(null===(s=t.response)||void 0===s?void 0:s.message),displayClass:"failure"})}}({id:e.id,status:a.target.checked?1:0})}})})]})}))))}catch(l){var e,a;(0,m.WU)({message:(null===(e=l.response.data)||void 0===e?void 0:e.message)||(null===(a=l.response)||void 0===a?void 0:a.message),displayClass:"failure"})}}}}}]);