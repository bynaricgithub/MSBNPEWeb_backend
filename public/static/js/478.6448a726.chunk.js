"use strict";(self.webpackChunkmnc_frontend=self.webpackChunkmnc_frontend||[]).push([[478],{1478:(e,s,a)=>{a.r(s),a.d(s,{default:()=>v});var t=a(9324),l=a(4959),i=a(3939),d=a(9950),n=a(2902),o=a(9262),c=a(9671),r=a(2776),m=a(7965),u=a(1261),h=a(4414);const v=()=>{var e;const[s,a]=(0,d.useState)(),[v,x]=(0,d.useState)(!1),[j,b]=(0,d.useState)(),[g,y]=(0,d.useState)({modal:!1,data:""});return(0,d.useEffect)((()=>{!async function(){try{let e=(await o.A.get("/admin/gallery/listing")).data;a(null===e||void 0===e?void 0:e.data.map(((e,s)=>({...e,srno:s+1,video:(0,h.jsx)("video",{src:e.video,alt:e.title,width:100}),actions:(0,h.jsxs)("div",{className:"d-flex justify-content-evenly",children:[(0,h.jsx)("button",{type:"button",className:"btn btn-sm btn-warning",onClick:s=>{b(e),x(!0)},children:(0,h.jsx)(l.g,{icon:t.LFz})}),(0,h.jsx)("button",{type:"button",className:"btn btn-sm btn-danger ms-2",onClick:s=>y({modal:!0,data:e}),children:(0,h.jsx)(l.g,{icon:t.yLS})}),(0,h.jsx)("div",{className:"text-center p-1",children:(0,h.jsx)(r.A.Check,{defaultChecked:1===e.status,type:"switch",id:"custom-switch",onClick:s=>{!async function(e){try{let s=(await o.A.put("/gallery/disable",e)).data;(0,c.WU)({message:s.message,displayClass:s.status})}catch(t){var s,a;(0,c.WU)({message:(null===(s=t.response.data)||void 0===s?void 0:s.message)||(null===(a=t.response)||void 0===a?void 0:a.message),displayClass:"failure"})}}({id:e.id,status:s.target.checked?1:0})}})})]})}))))}catch(i){var e,s;(0,c.WU)({message:(null===(e=i.response.data)||void 0===e?void 0:e.message)||(null===(s=i.response)||void 0===s?void 0:s.message),displayClass:"failure"})}}()}),[v,g]),(0,h.jsxs)("div",{children:[(0,h.jsx)("div",{className:"text-center py-4",children:(0,h.jsx)("h2",{children:"Manage Videos"})}),(0,h.jsxs)("button",{type:"button",className:"btn rounded-5 btn-success",onClick:e=>{b(!1),x(!0)},children:[(0,h.jsx)(l.g,{icon:t.QLR})," Add Video Gallery"]}),(0,h.jsx)("div",{className:"depttableSection my-3",children:s?(null===s||void 0===s?void 0:s.length)>0&&(0,h.jsx)(u.A,{data:s,columns:[{text:"Sr.No.",dataField:"srno"},{text:"Link",dataField:"link2"},{text:"Video",dataField:"video"},{text:"Actions",dataField:"actions"}],keyField:"srno",headerClasses:"admin-allTable_header"}):(0,h.jsx)(m.A,{})}),(0,h.jsxs)(n.A,{show:v,onHide:e=>x(!1),centered:!0,size:"lg",children:[(0,h.jsx)(n.A.Header,{className:"bgBrown text-light",children:(0,h.jsxs)(n.A.Title,{children:[j?"Edit":"Add Videos"," ",null===j||void 0===j?void 0:j.title," "]})}),(0,h.jsx)(n.A.Body,{children:(0,h.jsx)(i.l1,{initialValues:{id:(null===j||void 0===j?void 0:j.id)||"",link:"",videoName:""},enableReinitialize:!0,onSubmit:e=>{},children:e=>{let{values:s,handleChange:a,setFieldValue:t}=e;return(0,h.jsxs)(i.lV,{children:[(0,h.jsxs)("div",{className:"row",children:[(0,h.jsx)("div",{className:"col-sm-6",children:(0,h.jsxs)("div",{className:"form-floating mb-3",children:[(0,h.jsx)(i.D0,{id:"floatingImage",name:"videoName",type:"file",onChange:e=>{a(e),t("video",e.currentTarget.files[0])},value:s.videoName,className:"form-control",placeholder:"Video",accept:"video/*"}),(0,h.jsx)("label",{htmlFor:"floatingImage",children:"Video File"}),(0,h.jsx)(i.Kw,{name:"video",children:e=>(0,h.jsx)("div",{className:"alert",children:e})})]})}),(0,h.jsxs)("div",{className:"col-sm-6",children:[!s.video&&(0,h.jsx)("div",{className:"text-center text-secondary",children:"No video selected"}),s.video&&(0,h.jsx)("video",{src:s.video&&URL.createObjectURL(s.video),alt:"selectedvideo",className:"p-2",width:300})]})]}),(0,h.jsx)("hr",{}),(0,h.jsx)("div",{className:"text-center py-3",children:(0,h.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Submit"})})]})}})}),(0,h.jsx)(n.A.Footer,{children:(0,h.jsx)("button",{type:"button",className:"btn btn-danger",onClick:e=>x(!1),children:"Close"})})]}),(0,h.jsxs)(n.A,{show:g.modal,centered:!0,onHide:e=>y({modal:!1,data:""}),children:[(0,h.jsx)(n.A.Header,{children:(0,h.jsx)(n.A.Title,{children:"Delete"})}),(0,h.jsxs)(n.A.Body,{children:["Do you really want to delete ?",(0,h.jsx)("br",{}),"Title : ",(0,h.jsx)("b",{children:null===(e=g.data)||void 0===e?void 0:e.title})]}),(0,h.jsxs)(n.A.Footer,{children:[(0,h.jsx)("button",{type:"button",className:"btn btn-danger",onClick:e=>{!async function(e){try{await(0,c.Wi)(e.video);let s=(await o.A.delete("/gallery/delete",{params:{id:e.id}})).data;y({modal:!1,data:""}),(0,c.WU)({message:s.message,displayClass:s.status})}catch(t){var s,a;(0,c.WU)({message:(null===(s=t.response.data)||void 0===s?void 0:s.message)||(null===(a=t.response)||void 0===a?void 0:a.message),displayClass:"failure"})}}(g.data)},children:"Delete"}),(0,h.jsx)("button",{type:"button",className:"btn btn-primary",onClick:e=>y({modal:!1,data:""}),children:"Cancel"})]})]})]})}}}]);