"use strict";(self.webpackChunkmnc_frontend=self.webpackChunkmnc_frontend||[]).push([[448],{7448:(e,s,a)=>{a.r(s),a.d(s,{default:()=>x});var l=a(9950),t=a(2902),i=a(3939),n=a(4959),d=a(9324),c=a(9262),r=a(9671),o=a(7965),m=a(1261),u=a(4414);const x=()=>{var e;const[s,a]=(0,l.useState)([]),[x,b]=(0,l.useState)([]),[y,h]=(0,l.useState)(!1),[j,p]=(0,l.useState)(!1),[v,g]=(0,l.useState)(!1),[f,N]=(0,l.useState)(null),[A,C]=(0,l.useState)(null),[S,w]=(0,l.useState)("");(0,l.useEffect)((()=>{k(),L()}),[]);const k=async()=>{try{var e;const s=await c.A.get("/admin/master-category-type/listing"),l=((null===(e=s.data)||void 0===e?void 0:e.data)||[]).map(((e,s)=>({...e,srno:s+1,actions:(0,u.jsxs)("div",{className:"d-flex gap-2 justify-content-center",children:[(0,u.jsx)("button",{className:"btn btn-warning btn-sm",onClick:()=>{N(e),p(!0)},children:(0,u.jsx)(n.g,{icon:d.LFz})}),(0,u.jsx)("button",{className:"btn btn-danger btn-sm",onClick:()=>_(e.id),children:(0,u.jsx)(n.g,{icon:d.yLS})})]})})));a(l)}catch{(0,r.WU)({message:"Failed to load types",displayClass:"failure"})}},L=async()=>{try{var e;const s=await c.A.get("/admin/master-category/listing"),a=((null===(e=s.data)||void 0===e?void 0:e.data)||[]).map(((e,s)=>{var a;return{...e,srno:s+1,typeLabel:(null===(a=e.type)||void 0===a?void 0:a.label)||"N/A",actions:(0,u.jsxs)("div",{className:"d-flex gap-2 justify-content-center",children:[(0,u.jsx)("button",{className:"btn btn-warning btn-sm",onClick:()=>{C(e),g(!0)},children:(0,u.jsx)(n.g,{icon:d.LFz})}),(0,u.jsx)("button",{className:"btn btn-danger btn-sm",onClick:()=>F(e.id),children:(0,u.jsx)(n.g,{icon:d.yLS})})]})}}));b(a)}catch{(0,r.WU)({message:"Failed to load categories",displayClass:"failure"})}},_=async e=>{try{await c.A.delete("/master-category-type/delete",{params:{id:e}}),(0,r.WU)({message:"Deleted successfully",displayClass:"success"}),k()}catch{(0,r.WU)({message:"Delete failed",displayClass:"failure"})}},F=async e=>{try{await c.A.delete("/master-category/delete",{params:{id:e}}),(0,r.WU)({message:"Deleted successfully",displayClass:"success"}),L()}catch{(0,r.WU)({message:"Delete failed",displayClass:"failure"})}};return(0,u.jsxs)("div",{className:"px-3",children:[(0,u.jsx)("div",{className:"text-center p-2",children:(0,u.jsx)("h3",{children:"Manage Master Category & Types"})}),(0,u.jsxs)("div",{className:"d-flex justify-content-between mb-2",children:[(0,u.jsxs)("button",{className:"btn rounded-5 btn-success",onClick:()=>p(!0),children:[(0,u.jsx)(n.g,{icon:d.QLR})," Add Type"]}),(0,u.jsxs)("button",{className:"btn rounded-5 btn-success mx-2",onClick:()=>g(!0),children:[(0,u.jsx)(n.g,{icon:d.QLR})," Add Category"]})]}),(0,u.jsxs)("div",{className:"row",children:[(0,u.jsx)("div",{className:"col-md-5 col-sm-12",children:(0,u.jsxs)("div",{className:"card px-3 py-3",children:[(0,u.jsx)("div",{className:"mb-2",children:(0,u.jsx)("h5",{className:"text-dark",children:"Types"})}),(0,u.jsx)("hr",{}),s.length?(0,u.jsx)(m.A,{data:s,columns:[{text:"Label",dataField:"label"},{text:"Name",dataField:"name"},{text:"Actions",dataField:"actions"}],keyField:"srno"}):(0,u.jsx)(o.A,{})]})}),(0,u.jsx)("div",{className:"col-md-7 col-sm-12",children:(0,u.jsxs)("div",{className:"card px-3 py-3",children:[(0,u.jsxs)("div",{className:"mb-2 d-flex justify-content-between",children:[(0,u.jsx)("h5",{className:"text-dark",children:"Categories"}),(0,u.jsxs)("select",{className:"form-select w-auto",onChange:e=>w(e.target.value),children:[(0,u.jsx)("option",{value:"",children:"All"}),s.map((e=>(0,u.jsx)("option",{value:e.id,children:e.label},e.id)))]})]}),(0,u.jsx)("hr",{}),x.length?(0,u.jsx)(m.A,{data:x.filter((e=>!S||e.master_category_type_id==S)).sort(((e,s)=>e.typeLabel<s.typeLabel?-1:e.typeLabel>s.typeLabel?1:e.value-s.value)),columns:[{text:"Type",dataField:"typeLabel"},{text:"Label",dataField:"label"},{text:"Value",dataField:"value"},{text:"Actions",dataField:"actions"}],keyField:"srno"}):(0,u.jsx)(o.A,{})]})})]}),(0,u.jsxs)(t.A,{show:j,onHide:()=>{p(!1),N(null)},centered:!0,children:[(0,u.jsx)(t.A.Header,{className:"bgTheme text-light",children:(0,u.jsxs)(t.A.Title,{children:[f?"Edit":"Add"," Type"]})}),(0,u.jsx)(t.A.Body,{children:(0,u.jsx)(i.l1,{initialValues:{id:(null===f||void 0===f?void 0:f.id)||"",name:(null===f||void 0===f?void 0:f.name)||"",label:(null===f||void 0===f?void 0:f.label)||""},onSubmit:async e=>{h(!0);try{e.id?await c.A.put("/master-category-type/update",e):await c.A.post("/master-category-type/add",e),(0,r.WU)({message:"Saved successfully",displayClass:"success"}),p(!1),N(null),k()}catch{(0,r.WU)({message:"Save failed",displayClass:"failure"})}h(!1)},enableReinitialize:!0,children:()=>(0,u.jsxs)(i.lV,{children:[(0,u.jsxs)("div",{className:"form-floating mb-3",children:[(0,u.jsx)(i.D0,{name:"name",className:"form-control"}),(0,u.jsx)("label",{children:"Name"})]}),(0,u.jsxs)("div",{className:"form-floating mb-3",children:[(0,u.jsx)(i.D0,{name:"label",className:"form-control"}),(0,u.jsx)("label",{children:"Label"})]}),(0,u.jsxs)("div",{className:"text-center",children:[(0,u.jsx)("button",{type:"submit",className:"btn btn-primary mx-2",disabled:y,children:y?"Saving...":"Submit"}),(0,u.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>p(!1),children:"Cancel"})]})]})})})]}),(0,u.jsxs)(t.A,{show:v,onHide:()=>{g(!1),C(null)},centered:!0,children:[(0,u.jsx)(t.A.Header,{className:"bgTheme text-light",children:(0,u.jsxs)(t.A.Title,{children:[A?"Edit":"Add"," Category"]})}),(0,u.jsx)(t.A.Body,{children:(0,u.jsx)(i.l1,{initialValues:{id:(null===A||void 0===A?void 0:A.id)||"",label:(null===A||void 0===A?void 0:A.label)||"",value:(null===A||void 0===A?void 0:A.value)||"",master_category_type_id:(null===A||void 0===A?void 0:A.master_category_type_id)||"",order_id:(null===A||void 0===A?void 0:A.order_id)||"",status:null!==(e=null===A||void 0===A?void 0:A.status)&&void 0!==e?e:1},onSubmit:async e=>{h(!0);try{e.id?await c.A.put("/master-category/update",e):await c.A.post("/master-category/add",e),(0,r.WU)({message:"Saved successfully",displayClass:"success"}),g(!1),C(null),L()}catch{(0,r.WU)({message:"Save failed",displayClass:"failure"})}h(!1)},enableReinitialize:!0,children:()=>(0,u.jsxs)(i.lV,{children:[(0,u.jsxs)("div",{className:"form-floating mb-3",children:[(0,u.jsx)(i.D0,{name:"label",className:"form-control"}),(0,u.jsx)("label",{children:"Label"})]}),(0,u.jsxs)("div",{className:"form-floating mb-3",children:[(0,u.jsx)(i.D0,{name:"value",type:"number",className:"form-control"}),(0,u.jsx)("label",{children:"Value"})]}),(0,u.jsxs)("div",{className:"form-floating mb-3",children:[(0,u.jsxs)(i.D0,{as:"select",name:"master_category_type_id",className:"form-control",children:[(0,u.jsx)("option",{value:"",children:"Select"}),s.map((e=>(0,u.jsx)("option",{value:e.id,children:e.label},e.id)))]}),(0,u.jsx)("label",{children:"Type"})]}),(0,u.jsxs)("div",{className:"text-center",children:[(0,u.jsx)("button",{type:"submit",className:"btn btn-primary mx-2",disabled:y,children:y?"Saving...":"Submit"}),(0,u.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>g(!1),children:"Cancel"})]})]})})})]})]})}}}]);