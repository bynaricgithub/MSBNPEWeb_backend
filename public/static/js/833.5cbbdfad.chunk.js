"use strict";(self.webpackChunkmnc_frontend=self.webpackChunkmnc_frontend||[]).push([[833],{4833:(a,e,s)=>{s.r(e),s.d(e,{default:()=>x});var t=s(9324),n=s(4959),d=s(3939),i=s(9950),l=s(2902),r=s(2776),o=s(5385),c=s(7965),m=s(9671),u=s(1261),g=s(4414);const x=()=>{var a;const[e,s]=(0,i.useState)([]),[x,h]=(0,i.useState)(!1),[v,p]=(0,i.useState)(),[j,y]=(0,i.useState)({modal:!1,data:""});(0,i.useEffect)((()=>{f()}),[x,j]);const b={id:(null===v||void 0===v?void 0:v.id)||"",category:(null===v||void 0===v?void 0:v.category)||"",duration:(null===v||void 0===v?void 0:v.duration)||"",examination:(null===v||void 0===v?void 0:v.examination)||"",registration:(null===v||void 0===v?void 0:v.registration)||""};return(0,g.jsxs)("div",{className:"px-3",children:[(0,g.jsx)("div",{className:"text-center p-2",children:(0,g.jsx)("h3",{children:"Manage Programs"})}),(0,g.jsx)("div",{className:"d-flex justify-content-between",children:(0,g.jsxs)("button",{className:"btn rounded-5 btn-success",onClick:()=>{p(null),h(!0)},children:[(0,g.jsx)(n.g,{icon:t.QLR})," Add Program"]})}),(0,g.jsx)("div",{className:"depttableSection my-3",children:e.length>0?(0,g.jsx)(u.A,{data:e,columns:[{text:"Sr.No.",dataField:"srno"},{text:"Category",dataField:"category"},{text:"Duration",dataField:"duration"},{text:"Examination",dataField:"examination"},{text:"Registration",dataField:"registration"},{text:"Actions",dataField:"actions"}],keyField:"srno",headerClasses:"admin-allTable_header",sortingTable:"programs",getData:f}):(0,g.jsx)(c.A,{})}),(0,g.jsxs)(l.A,{show:x,onHide:()=>h(!1),centered:!0,size:"lg",children:[(0,g.jsx)(l.A.Header,{className:"bgTheme text-light",children:(0,g.jsx)(l.A.Title,{children:v?"Edit Program":"Add Program"})}),(0,g.jsx)(l.A.Body,{children:(0,g.jsx)(d.l1,{initialValues:b,enableReinitialize:!0,onSubmit:a=>{v?async function(a){try{const e=await o.A.put("/programs/update",a);(0,m.WU)({message:e.data.message,displayClass:e.data.status}),h(!1)}catch(t){var e,s;(0,m.WU)({message:(null===(e=t.response)||void 0===e||null===(s=e.data)||void 0===s?void 0:s.message)||"Update failed",displayClass:"failure"})}}(a):async function(a){try{const e=await o.A.post("/programs/add",a);(0,m.WU)({message:e.data.message,displayClass:e.data.status}),h(!1)}catch(t){var e,s;(0,m.WU)({message:(null===(e=t.response)||void 0===e||null===(s=e.data)||void 0===s?void 0:s.message)||"Add failed",displayClass:"failure"})}}(a)},children:a=>{let{values:e,handleChange:s,isValid:t,dirty:n}=a;return(0,g.jsxs)(d.lV,{children:[(0,g.jsx)("div",{className:"row",children:["category","duration","examination","registration"].map(((a,e)=>(0,g.jsx)("div",{className:"col-md-12",children:(0,g.jsxs)("div",{className:"form-floating mb-3",children:[(0,g.jsx)(d.D0,{name:a,className:"form-control",placeholder:a}),(0,g.jsx)("label",{htmlFor:a,children:a.charAt(0).toUpperCase()+a.slice(1)}),(0,g.jsx)(d.Kw,{name:a,children:a=>(0,g.jsx)("div",{className:"text-danger font-12",children:a})})]})},e)))}),(0,g.jsxs)("div",{className:"text-center py-3",children:[(0,g.jsx)("button",{className:"btn btn-primary mx-2",type:"submit",disabled:!t||!n,children:"Submit"}),(0,g.jsx)("button",{className:"btn btn-danger mx-2",onClick:()=>h(!1),type:"button",children:"Cancel"})]})]})}})})]}),(0,g.jsxs)(l.A,{show:j.modal,centered:!0,onHide:()=>y({modal:!1,data:""}),children:[(0,g.jsx)(l.A.Header,{children:(0,g.jsx)(l.A.Title,{children:"Delete Program"})}),(0,g.jsxs)(l.A.Body,{children:["Are you sure you want to delete ",(0,g.jsx)("b",{children:null===(a=j.data)||void 0===a?void 0:a.category}),"?"]}),(0,g.jsxs)(l.A.Footer,{children:[(0,g.jsx)("button",{className:"btn btn-danger",onClick:()=>async function(a){try{const e=await o.A.delete("/programs/delete",{params:{id:a.id}});(0,m.WU)({message:e.data.message,displayClass:e.data.status}),y({modal:!1,data:""})}catch(t){var e,s;(0,m.WU)({message:(null===(e=t.response)||void 0===e||null===(s=e.data)||void 0===s?void 0:s.message)||"Delete failed",displayClass:"failure"})}}(j.data),children:"Delete"}),(0,g.jsx)("button",{className:"btn btn-secondary",onClick:()=>y({modal:!1,data:""}),children:"Cancel"})]})]})]});async function f(){try{var a;const e=(null===(a=(await o.A.get("/admin/programs/listing")).data)||void 0===a?void 0:a.data)||[];s(e.map(((a,e)=>({...a,srno:e+1,actions:(0,g.jsxs)("div",{className:"d-flex justify-content-evenly",children:[(0,g.jsx)("button",{className:"btn btn-sm btn-warning",onClick:()=>{p(a),h(!0)},children:(0,g.jsx)(n.g,{icon:t.LFz})}),(0,g.jsx)("button",{className:"btn btn-sm btn-danger ms-2",onClick:()=>y({modal:!0,data:a}),children:(0,g.jsx)(n.g,{icon:t.yLS})}),(0,g.jsx)("div",{className:"text-center p-1",children:(0,g.jsx)(r.A.Check,{defaultChecked:1===a.status,type:"switch",onClick:e=>async function(a){try{const e=await o.A.put("/programs/disable",a);(0,m.WU)({message:e.data.message,displayClass:e.data.status})}catch(t){var e,s;(0,m.WU)({message:(null===(e=t.response)||void 0===e||null===(s=e.data)||void 0===s?void 0:s.message)||"Status update failed",displayClass:"failure"})}}({id:a.id,status:e.target.checked?1:0})})})]})}))))}catch(i){var e,d;(0,m.WU)({message:(null===(e=i.response)||void 0===e||null===(d=e.data)||void 0===d?void 0:d.message)||"Error fetching data",displayClass:"failure"})}}}}}]);