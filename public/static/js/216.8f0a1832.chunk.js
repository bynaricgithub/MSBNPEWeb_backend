"use strict";(self.webpackChunkmnc_frontend=self.webpackChunkmnc_frontend||[]).push([[216],{5216:(e,a,s)=>{s.r(a),s.d(a,{default:()=>x});var l=s(9324),t=s(4959),n=s(3939),i=s(9950),d=s(2902),o=s(2776),c=s(9262),r=s(7965),u=s(9671),m=s(1261),h=s(4414);const x=()=>{var e;const[a,s]=(0,i.useState)(),[x,v]=(0,i.useState)(!1),[p,g]=(0,i.useState)(),[j,b]=(0,i.useState)(!1),[f,y]=(0,i.useState)({modal:!1,data:""});(0,i.useEffect)((()=>{N()}),[j,f]);const k=e=>{let{name:a,heading:s}=e;return(0,h.jsxs)("div",{className:"form-floating mb-3",children:[(0,h.jsx)(n.D0,{name:a,type:"text",className:"form-control",placeholder:s}),(0,h.jsx)("label",{htmlFor:a,children:s}),(0,h.jsx)(n.Kw,{name:a,children:e=>(0,h.jsx)("span",{className:"text-danger font-12",children:e})})]})};return(0,h.jsxs)("div",{className:"px-3",children:[(0,h.jsx)("div",{className:"text-center p-2",children:(0,h.jsx)("h3",{children:"Manage File Uploads"})}),(0,h.jsxs)("button",{type:"button",className:"btn rounded-5 btn-success",onClick:()=>{g(null),b(!0)},children:[(0,h.jsx)(t.g,{icon:l.QLR})," Add File"]}),(0,h.jsx)("div",{className:"depttableSection my-3",children:a?(null===a||void 0===a?void 0:a.length)>0&&(0,h.jsx)(m.A,{data:a,columns:[{text:"Sr.No.",dataField:"srno"},{text:"Date",dataField:"date"},{text:"Title",dataField:"title"},{text:"PDF",dataField:"link2"},{text:"Actions",dataField:"actions"}],keyField:"srno",headerClasses:"admin-allTable_header",sortingTable:"fileuploads",getData:N}):(0,h.jsx)(r.A,{})}),(0,h.jsxs)(d.A,{show:j,onHide:()=>b(!1),centered:!0,size:"lg",children:[(0,h.jsx)(d.A.Header,{className:"bgTheme text-light",children:(0,h.jsxs)(d.A.Title,{children:[" ",p?"Edit File":"Add File"]})}),(0,h.jsx)(d.A.Body,{children:(0,h.jsx)(n.l1,{initialValues:{id:(null===p||void 0===p?void 0:p.id)||"",title:(null===p||void 0===p?void 0:p.title)||"",date:(null===p||void 0===p?void 0:p.date)||"",link:"",linkName:""},enableReinitialize:!0,onSubmit:e=>{p?async function(e){v(!0),e.link&&(await(0,u.Wi)(p.link),e.link=await(0,u.aj)(e.link,"fileuploads"));delete e.linkName;try{const a=await c.A.put("/fileuploads/update",e);(0,u.WU)({message:a.data.message,displayClass:a.data.status}),b(!1)}catch(t){var a,s,l;(0,u.WU)({message:(null===t||void 0===t||null===(a=t.response)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.message)||(null===t||void 0===t||null===(l=t.response)||void 0===l?void 0:l.message),displayClass:"failure"})}v(!1)}(e):async function(e){if(v(!0),!e.link)return(0,u.WU)({message:"Please select a PDF file.",displayClass:"danger"}),void v(!1);e.link=await(0,u.aj)(e.link,"fileuploads"),delete e.linkName;try{const a=await c.A.post("/fileuploads/add",e);(0,u.WU)({message:a.data.message,displayClass:a.data.status}),b(!1)}catch(t){var a,s,l;(0,u.WU)({message:(null===t||void 0===t||null===(a=t.response)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.message)||(null===t||void 0===t||null===(l=t.response)||void 0===l?void 0:l.message),displayClass:"failure"})}v(!1)}(e)},children:e=>{let{values:a,handleChange:s,setFieldValue:l}=e;return(0,h.jsxs)(n.lV,{children:[(0,h.jsx)(k,{name:"title",heading:"Title"}),(0,h.jsxs)("div",{className:"form-floating mb-3",children:[(0,h.jsx)(n.D0,{id:"floatingDate",name:"date",type:"date",className:"form-control"}),(0,h.jsx)("label",{htmlFor:"floatingDate",children:"Date"}),(0,h.jsx)(n.Kw,{name:"date",children:e=>(0,h.jsx)("span",{className:"text-danger font-12",children:e})})]}),(0,h.jsxs)("div",{className:"form-floating mb-3",children:[(0,h.jsx)(n.D0,{name:"linkName",type:"file",onChange:e=>{s(e),l("link",e.currentTarget.files[0])},className:"form-control",accept:".pdf"}),(0,h.jsx)("label",{children:"PDF File"}),(0,h.jsx)(n.Kw,{name:"link",children:e=>(0,h.jsx)("span",{className:"text-danger font-12",children:e})})]}),(0,h.jsx)("hr",{}),(0,h.jsxs)("div",{className:"text-center py-3",children:[(0,h.jsx)("button",{type:"submit",className:"btn btn-primary mx-2",disabled:x,children:x?"Loading...":"Submit"}),(0,h.jsx)("button",{type:"button",className:"btn btn-danger mx-2",onClick:()=>b(!1),disabled:x,children:"Cancel"})]})]})}})})]}),(0,h.jsxs)(d.A,{show:f.modal,centered:!0,onHide:()=>y({modal:!1,data:""}),children:[(0,h.jsx)(d.A.Header,{children:(0,h.jsx)(d.A.Title,{children:"Delete"})}),(0,h.jsxs)(d.A.Body,{children:["Do you really want to delete?",(0,h.jsx)("br",{}),"Title: ",(0,h.jsx)("b",{children:null===(e=f.data)||void 0===e?void 0:e.title})]}),(0,h.jsxs)(d.A.Footer,{children:[(0,h.jsx)("button",{type:"button",className:"btn btn-danger",onClick:()=>async function(e){try{await(0,u.Wi)(e.link);const a=await c.A.delete("/fileuploads/delete",{params:{id:e.id}});y({modal:!1,data:""}),(0,u.WU)({message:a.data.message,displayClass:a.data.status})}catch(t){var a,s,l;(0,u.WU)({message:(null===t||void 0===t||null===(a=t.response)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.message)||(null===t||void 0===t||null===(l=t.response)||void 0===l?void 0:l.message),displayClass:"failure"})}}(f.data),children:"Delete"}),(0,h.jsx)("button",{type:"button",className:"btn btn-primary",onClick:()=>y({modal:!1,data:""}),children:"Cancel"})]})]})]});async function N(){try{var e;const a=(await c.A.get("/admin/fileuploads/listing")).data;s(null===a||void 0===a||null===(e=a.data)||void 0===e?void 0:e.map(((e,a)=>({...e,srno:a+1,link2:(0,h.jsxs)("a",{href:"https://msbnpe.bynaricexam.com/data/"+e.link,target:"_blank",rel:"noreferrer",children:["Open PDF ",(0,h.jsx)(t.g,{icon:l.Ju_})]}),actions:(0,h.jsxs)("div",{className:"d-flex justify-content-evenly",children:[(0,h.jsx)("button",{type:"button",className:"btn btn-sm btn-warning",onClick:()=>{g(e),b(!0)},children:(0,h.jsx)(t.g,{icon:l.LFz})}),(0,h.jsx)("button",{type:"button",className:"btn btn-sm btn-danger ms-2",onClick:()=>y({modal:!0,data:e}),children:(0,h.jsx)(t.g,{icon:l.yLS})}),(0,h.jsx)("div",{className:"text-center p-1",children:(0,h.jsx)(o.A.Check,{defaultChecked:1===e.status,type:"switch",id:"custom-switch",onClick:a=>async function(e){try{const a=await c.A.put("/fileuploads/disable",e);(0,u.WU)({message:a.data.message,displayClass:a.data.status})}catch(t){var a,s,l;(0,u.WU)({message:(null===t||void 0===t||null===(a=t.response)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.message)||(null===t||void 0===t||null===(l=t.response)||void 0===l?void 0:l.message),displayClass:"failure"})}}({id:e.id,status:a.target.checked?1:0})})})]})}))))}catch(d){var a,n,i;(0,u.WU)({message:(null===d||void 0===d||null===(a=d.response)||void 0===a||null===(n=a.data)||void 0===n?void 0:n.message)||(null===(i=d.response)||void 0===i?void 0:i.message),displayClass:"failure"})}}}}}]);