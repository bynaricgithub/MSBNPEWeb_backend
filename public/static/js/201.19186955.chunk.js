"use strict";(self.webpackChunkmnc_frontend=self.webpackChunkmnc_frontend||[]).push([[201],{6201:(e,a,s)=>{s.r(a),s.d(a,{default:()=>x});var t=s(9324),l=s(4959),i=s(3939),n=s(9950),d=s(2902),m=s(2776),r=s(9262),c=s(7965),o=s(9671),g=s(1261),u=s(6030),h=s(4414);const x=()=>{var e;const[a,s]=(0,n.useState)(),[x,p]=(0,n.useState)(!1),[b,v]=(0,n.useState)(),[j,y]=(0,n.useState)({modal:!1,data:""}),{categories:f}=(0,u.A)("membersTypes");return(0,n.useEffect)((()=>{f.length&&N()}),[f,x,j]),(0,h.jsxs)("div",{className:"px-3",children:[(0,h.jsx)("div",{className:"text-center p-2",children:(0,h.jsx)("h3",{children:"Manage Members"})}),(0,h.jsx)("div",{className:"d-flex justify-content-between",children:(0,h.jsxs)("button",{type:"button",className:"btn rounded-5 btn-success",onClick:e=>{v(!1),p(!0)},children:[(0,h.jsx)(l.g,{icon:t.QLR})," Add Member"]})}),(0,h.jsx)("div",{className:"depttableSection my-3",children:a?(null===a||void 0===a?void 0:a.length)>0&&(0,h.jsx)(g.A,{data:a,columns:[{text:"Sr.No.",dataField:"srno"},{text:"Title",dataField:"title"},{text:"Subtitle",dataField:"subtitle"},{text:"Image",dataField:"image"},{text:"Type",dataField:"typeName"},{text:"Order ID",dataField:"order_id"},{text:"Actions",dataField:"actions"}],keyField:"srno",headerClasses:"admin-allTable_header",sortingTable:"members",getData:N}):(0,h.jsx)(c.A,{})}),(0,h.jsxs)(d.A,{show:x,onHide:e=>p(!1),centered:!0,size:"lg",children:[(0,h.jsx)(d.A.Header,{className:"bgTheme text-light",children:(0,h.jsxs)(d.A.Title,{children:[b?"Edit":"Add Member"," ",null===b||void 0===b?void 0:b.title," "]})}),(0,h.jsx)(d.A.Body,{children:(0,h.jsx)(i.l1,{initialValues:{id:(null===b||void 0===b?void 0:b.id)||"",title:(null===b||void 0===b?void 0:b.title)||"",subtitle:(null===b||void 0===b?void 0:b.subtitle)||"",imageName:"",image:"",type:(null===b||void 0===b?void 0:b.type)||""},enableReinitialize:!0,onSubmit:e=>{b?async function(e){e.image&&(await(0,o.Wi)(b.image),e.image=await(0,o.aj)(e.image));delete e.linkName,delete e.imageName;try{let a=(await r.A.put("/members/update",e)).data;p(!1),(0,o.WU)({message:a.message,displayClass:a.status})}catch(t){var a,s;(0,o.WU)({message:(null===(a=t.response.data)||void 0===a?void 0:a.message)||(null===(s=t.response)||void 0===s?void 0:s.message),displayClass:"failure"})}}({...e}):async function(e){if(!e.image)return(0,o.WU)({message:"Please Select a File.",displayClass:"danger"}),null;e.image=await(0,o.aj)(e.image),delete e.imageName;try{let a=(await r.A.post("/members/add",e)).data;p(!1),(0,o.WU)({message:a.message,displayClass:a.status})}catch(t){var a,s;(0,o.WU)({message:(null===(a=t.response.data)||void 0===a?void 0:a.message)||(null===(s=t.response)||void 0===s?void 0:s.message),displayClass:"failure"})}}({...e})},children:e=>{let{values:a,handleChange:s,setFieldValue:t,isValid:l,dirty:n}=e;return(0,h.jsxs)(i.lV,{children:[(0,h.jsxs)("div",{className:"row",children:[[{name:"title",heading:"Title"},{name:"subtitle",heading:"Subtitle"}].map(((e,s)=>(0,h.jsx)("div",{className:"col-12",children:(0,h.jsxs)("div",{className:"form-floating mb-3",children:[(0,h.jsx)(i.D0,{id:"floating"+e.name,name:e.name,type:"text",value:a[e.name],className:"form-control",placeholder:e.name}),(0,h.jsx)("label",{htmlFor:"floating"+e.name,children:e.heading}),(0,h.jsx)(i.Kw,{name:e.name,children:e=>(0,h.jsx)("span",{className:"text-danger font-12",children:e})})]})},s))),(0,h.jsx)("div",{className:"col-12",children:(0,h.jsxs)("div",{className:"form-floating mb-3",children:[(0,h.jsxs)(i.D0,{as:"select",name:"type",className:"form-select",value:a.type,onChange:s,children:[(0,h.jsx)("option",{value:"",children:"Select Type"}),f.map(((e,a)=>(0,h.jsxs)("option",{value:e.value,children:[a+1,". ",e.label]},e.value)))]}),(0,h.jsx)("label",{htmlFor:"type",children:"Type"}),(0,h.jsx)(i.Kw,{name:"type",children:e=>(0,h.jsx)("span",{className:"text-danger font-12",children:e})})]})}),(0,h.jsx)("div",{className:"col-sm-12",children:(0,h.jsxs)("div",{className:"form-floating mb-3",children:[(0,h.jsx)(i.D0,{id:"floatingImage",name:"imageName",type:"file",onChange:e=>{s(e),t("image",e.currentTarget.files[0])},value:a.imageName,className:"form-control",placeholder:"Image",accept:"image/*"}),(0,h.jsx)("label",{htmlFor:"floatingImage",children:"Image File"}),(0,h.jsx)(i.Kw,{name:"image",children:e=>(0,h.jsx)("span",{className:"text-danger font-12",children:e})})]})}),(0,h.jsxs)("div",{className:"col-sm-12",children:[!a.image&&(0,h.jsx)("div",{className:"text-center text-secondary",children:"No image selected"}),a.image&&(0,h.jsx)("img",{src:a.image&&URL.createObjectURL(a.image),alt:"selectedImage",className:"p-1 img-fluid",height:100})]})]}),(0,h.jsx)("hr",{}),(0,h.jsxs)("div",{className:"text-center py-3",children:[(0,h.jsx)("button",{type:"submit",className:"mx-2 btn btn-primary",disabled:!l||!n,children:"Submit"}),(0,h.jsx)("button",{type:"button",className:"mx-2 btn btn-danger",onClick:e=>p(!1),children:"Close"})]})]})}})})]}),(0,h.jsxs)(d.A,{show:j.modal,centered:!0,onHide:e=>y({modal:!1,data:""}),children:[(0,h.jsx)(d.A.Header,{children:(0,h.jsx)(d.A.Title,{children:"Delete"})}),(0,h.jsxs)(d.A.Body,{children:["Do you really want to delete ?",(0,h.jsx)("br",{}),"Title : ",(0,h.jsx)("b",{children:null===(e=j.data)||void 0===e?void 0:e.title})]}),(0,h.jsxs)(d.A.Footer,{children:[(0,h.jsx)("button",{type:"button",className:"btn btn-danger",onClick:e=>{!async function(e){try{await(0,o.Wi)(e.link),await(0,o.Wi)(e.image);let a=(await r.A.delete("/members/delete",{params:{id:e.id}})).data;y({modal:!1,data:""}),(0,o.WU)({message:a.message,displayClass:a.status})}catch(t){var a,s;(0,o.WU)({message:(null===(a=t.response.data)||void 0===a?void 0:a.message)||(null===(s=t.response)||void 0===s?void 0:s.message),displayClass:"failure"})}}(j.data)},children:"Delete"}),(0,h.jsx)("button",{type:"button",className:"btn btn-primary",onClick:e=>y({modal:!1,data:""}),children:"Cancel"})]})]})]});async function N(){try{let e=(await r.A.get("/admin/members/listing")).data;const a=Object.fromEntries(f.map((e=>[String(e.value),e.label])));s(null===e||void 0===e?void 0:e.data.sort(((e,a)=>e.order_id-a.order_id)).map(((e,s)=>({...e,srno:s+1,typeName:a[String(e.type)]||"N/A",image:(0,h.jsx)("img",{src:"https://msbnpe.bynaricexam.com/data/"+e.image,alt:e.title,width:100}),link2:(0,h.jsxs)("a",{href:"https://msbnpe.bynaricexam.com/data/"+e.link,target:"_blank",rel:"noreferrer",className:"text-decoration-none",children:["Open PDF ",(0,h.jsx)(l.g,{icon:t.Ju_})]}),actions:(0,h.jsxs)("div",{className:"d-flex justify-content-evenly",children:[(0,h.jsx)("button",{type:"button",className:"btn btn-sm btn-warning",onClick:a=>{v(e),p(!0)},children:(0,h.jsx)(l.g,{icon:t.LFz})}),(0,h.jsx)("button",{type:"button",className:"btn btn-sm btn-danger ms-2",onClick:a=>y({modal:!0,data:e}),children:(0,h.jsx)(l.g,{icon:t.yLS})}),(0,h.jsx)("div",{className:"text-center p-1",children:(0,h.jsx)(m.A.Check,{defaultChecked:1===e.status,type:"switch",id:"custom-switch",onClick:a=>{!async function(e){try{let a=(await r.A.put("/members/disable",e)).data;(0,o.WU)({message:a.message,displayClass:a.status})}catch(t){var a,s;(0,o.WU)({message:(null===(a=t.response.data)||void 0===a?void 0:a.message)||(null===(s=t.response)||void 0===s?void 0:s.message),displayClass:"failure"})}}({id:e.id,status:a.target.checked?1:0})}})})]})}))))}catch(i){var e,a;(0,o.WU)({message:(null===(e=i.response.data)||void 0===e?void 0:e.message)||(null===(a=i.response)||void 0===a?void 0:a.message),displayClass:"failure"})}}}}}]);