"use strict";(self.webpackChunkmnc_frontend=self.webpackChunkmnc_frontend||[]).push([[300],{7919:(e,a,s)=>{s.r(a),s.d(a,{default:()=>b});var t=s(9324),l=s(4959),n=s(3939),d=s(9950),i=s(2902),c=s(2776),o=s(5385),r=s(7965),u=s(9671),m=s(1261),x=s(6030),h=s(4414);const b=()=>{var e;const[a,s]=(0,d.useState)([]),[b,g]=(0,d.useState)(null),[j,y]=(0,d.useState)(!1),[f,v]=(0,d.useState)({modal:!1,data:""}),{categories:p}=(0,x.A)("faqCategories");(0,d.useEffect)((()=>{p.length&&A()}),[p,j,f]);const A=async()=>{try{var e;const a=(null===(e=(await o.A.get("/admin/faq/listing")).data)||void 0===e?void 0:e.data)||[],n=Object.fromEntries(p.map((e=>[String(e.value),e.label])));s(a.map(((e,a)=>({...e,srno:a+1,categoryLabel:n[String(e.faq_category_id)]||"N/A",actions:(0,h.jsxs)("div",{className:"d-flex gap-2 justify-content-center",children:[(0,h.jsx)("button",{type:"button",className:"btn btn-sm btn-warning",onClick:()=>{g(e),y(!0)},children:(0,h.jsx)(l.g,{icon:t.LFz})}),(0,h.jsx)("button",{type:"button",className:"btn btn-sm btn-danger ms-2",onClick:()=>v({modal:!0,data:e}),children:(0,h.jsx)(l.g,{icon:t.yLS})}),(0,h.jsx)("div",{className:"text-center p-1",children:(0,h.jsx)(c.A.Check,{defaultChecked:1===e.status,type:"switch",onClick:a=>C(e.id,a.target.checked?1:0)})})]})}))))}catch(a){(0,u.WU)({message:"Failed to load FAQs",displayClass:"failure"})}},C=async(e,a)=>{try{await o.A.put("/faq/disable",{id:e,status:a}),(0,u.WU)({message:"Status updated",displayClass:"success"})}catch{(0,u.WU)({message:"Failed to update status",displayClass:"failure"})}};return(0,h.jsxs)("div",{className:"px-3",children:[(0,h.jsx)("div",{className:"text-center p-2",children:(0,h.jsx)("h3",{children:"Manage FAQs"})}),(0,h.jsxs)("button",{className:"btn btn-success rounded-5 mb-1",onClick:()=>{g(null),y(!0)},children:[(0,h.jsx)(l.g,{icon:t.QLR})," Add FAQ"]}),(0,h.jsx)("div",{className:"depttableSection my-3",children:a.length>0?(0,h.jsx)(m.A,{data:a,columns:[{text:"Sr.No.",dataField:"srno"},{text:"Category",dataField:"categoryLabel"},{text:"Question",dataField:"question"},{text:"Answer",dataField:"answer"},{text:"Actions",dataField:"actions"}],keyField:"srno",headerClasses:"admin-allTable_header",sortingTable:"faq",getData:A}):(0,h.jsx)(r.A,{})}),(0,h.jsxs)(i.A,{show:j,onHide:()=>y(!1),centered:!0,children:[(0,h.jsx)(i.A.Header,{className:"bgTheme text-light",children:(0,h.jsxs)(i.A.Title,{children:[b?"Edit":"Add"," FAQ"]})}),(0,h.jsx)(i.A.Body,{children:(0,h.jsx)(n.l1,{enableReinitialize:!0,initialValues:{id:(null===b||void 0===b?void 0:b.id)||"",faq_category_id:(null===b||void 0===b?void 0:b.faq_category_id)||"",question:(null===b||void 0===b?void 0:b.question)||"",answer:(null===b||void 0===b?void 0:b.answer)||""},onSubmit:async e=>{try{e.id?await o.A.put("/faq/update",e):await o.A.post("/faq/add",e),(0,u.WU)({message:"Saved successfully",displayClass:"success"}),y(!1)}catch(t){var a,s;(0,u.WU)({message:(null===t||void 0===t||null===(a=t.response)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.message)||"Save failed",displayClass:"failure"})}},children:e=>{let{values:a}=e;return(0,h.jsxs)(n.lV,{children:[(0,h.jsxs)("div",{className:"form-floating mb-3",children:[(0,h.jsxs)(n.D0,{as:"select",name:"faq_category_id",className:"form-select",value:String(a.faq_category_id||""),children:[(0,h.jsx)("option",{value:"",children:"Select Category"}),p.map((e=>(0,h.jsx)("option",{value:String(e.value),children:e.label},e.value)))]}),(0,h.jsx)("label",{htmlFor:"faq_category_id",children:"Category"}),(0,h.jsx)(n.Kw,{name:"faq_category_id",component:"div",className:"text-danger font-12"})]}),(0,h.jsxs)("div",{className:"form-floating mb-3",children:[(0,h.jsx)(n.D0,{name:"question",className:"form-control",placeholder:"Question"}),(0,h.jsx)("label",{htmlFor:"question",children:"Question"}),(0,h.jsx)(n.Kw,{name:"question",component:"div",className:"text-danger font-12"})]}),(0,h.jsxs)("div",{className:"form-floating mb-3",children:[(0,h.jsx)(n.D0,{as:"textarea",name:"answer",className:"form-control",placeholder:"Answer"}),(0,h.jsx)("label",{htmlFor:"answer",children:"Answer"}),(0,h.jsx)(n.Kw,{name:"answer",component:"div",className:"text-danger font-12"})]}),(0,h.jsxs)("div",{className:"text-center",children:[(0,h.jsx)("button",{type:"submit",className:"btn btn-primary mx-2",children:"Submit"}),(0,h.jsx)("button",{type:"button",className:"btn btn-secondary mx-2",onClick:()=>y(!1),children:"Cancel"})]})]})}})})]}),(0,h.jsxs)(i.A,{show:f.modal,onHide:()=>v({modal:!1,data:""}),centered:!0,children:[(0,h.jsx)(i.A.Header,{children:(0,h.jsx)(i.A.Title,{children:"Delete FAQ"})}),(0,h.jsxs)(i.A.Body,{children:["Are you sure you want to delete ",(0,h.jsx)("b",{children:null===(e=f.data)||void 0===e?void 0:e.question}),"?"]}),(0,h.jsxs)(i.A.Footer,{children:[(0,h.jsx)("button",{className:"btn btn-danger",onClick:()=>(async e=>{try{await o.A.delete("/faq/delete",{params:{id:e.id}}),v({modal:!1,data:""}),(0,u.WU)({message:"Deleted successfully",displayClass:"success"})}catch{(0,u.WU)({message:"Failed to delete",displayClass:"failure"})}})(f.data),children:"Delete"}),(0,h.jsx)("button",{className:"btn btn-secondary",onClick:()=>v({modal:!1,data:""}),children:"Cancel"})]})]})]})}}}]);