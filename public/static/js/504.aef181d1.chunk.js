"use strict";(self.webpackChunkmnc_frontend=self.webpackChunkmnc_frontend||[]).push([[504],{5504:(e,a,t)=>{t.r(a),t.d(a,{default:()=>h});var s=t(9324),l=t(4959),i=t(3939),n=t(9950),d=t(2902),o=t(2776),r=t(5385),c=t(7965),m=t(9671),u=t(1261),p=t(4414);const h=()=>{var e;const[a,t]=(0,n.useState)(),[h,x]=(0,n.useState)(!1),[g,v]=(0,n.useState)(),[j,b]=(0,n.useState)(!1),[y,f]=(0,n.useState)({modal:!1,data:""});(0,n.useEffect)((()=>{C()}),[h,y]);const k=e=>{let{name:a,heading:t}=e;return(0,p.jsx)("div",{children:(0,p.jsxs)("div",{className:"form-floating mb-3",children:[(0,p.jsx)(i.D0,{id:"floating"+a,name:a,type:"text",className:"form-control",placeholder:t}),(0,p.jsxs)("label",{htmlFor:"floating"+a,children:[(0,p.jsx)("font",{color:"red",children:"* "}),t]}),(0,p.jsx)(i.Kw,{name:a,children:e=>(0,p.jsx)("div",{className:"alert alert-danger",children:e})})]})})};return(0,p.jsxs)("div",{className:"px-3",children:[(0,p.jsx)("div",{className:"text-center p-2",children:(0,p.jsx)("h3",{children:"Manage Latest Update"})}),(0,p.jsxs)("button",{type:"button",className:"btn rounded-5 btn-success ",onClick:e=>{v(!1),x(!0)},children:[(0,p.jsx)(l.g,{icon:s.QLR})," Add Latest Update"]}),(0,p.jsx)("div",{className:"depttableSection my-3",children:a?(null===a||void 0===a?void 0:a.length)>0&&(0,p.jsx)(u.A,{data:a,columns:[{text:"Sr.No.",dataField:"srno"},{text:"Title",dataField:"title"},{text:"Link",dataField:"link2"},{text:"Order ID",dataField:"order_id"},{text:"Actions",dataField:"actions"}],keyField:"srno",headerClasses:"admin-allTable_header",sortingTable:"latest_update",getData:C}):(0,p.jsx)(c.A,{})}),(0,p.jsxs)(d.A,{show:h,onHide:e=>x(!1),centered:!0,size:"lg",children:[(0,p.jsx)(d.A.Header,{className:"bgTheme text-light",children:(0,p.jsxs)(d.A.Title,{children:[" ",g?"Edit":"Add Latest Update"," ",null===g||void 0===g?void 0:g.title," "]})}),(0,p.jsx)(d.A.Body,{children:(0,p.jsx)(i.l1,{initialValues:{id:(null===g||void 0===g?void 0:g.id)||"",title:(null===g||void 0===g?void 0:g.title)||"",link:(null===g||void 0===g?void 0:g.link)||"",type:g?"URL":""},enableReinitialize:!0,onSubmit:async e=>{b(!0),g?await async function(e){try{if(!e.link)return(0,m.WU)({message:"Please Select a File or Link.",displayClass:"danger"}),null;(e.link instanceof File||e.link instanceof Blob)&&(e.link=await(0,m.ZP)(e.link,"latestUpdate"),e.link="https://mncsite.bynaricexam.com/data/"+e.link);let a=(await r.A.put("/latest-update/update",e)).data;x(!1),(0,m.WU)({message:a.message,displayClass:a.status})}catch(s){var a,t;(0,m.WU)({message:(null===(a=s.response.data)||void 0===a?void 0:a.message)||(null===(t=s.response)||void 0===t?void 0:t.message),displayClass:"failure"})}}(e):await async function(e){try{if(!e.link)return(0,m.WU)({message:"Please Select a File or Link.",displayClass:"danger"}),null;(e.link instanceof File||e.link instanceof Blob)&&(e.link=await(0,m.ZP)(e.link,"latestUpdate"),e.link="https://mncsite.bynaricexam.com/data/"+e.link);let a=(await r.A.post("/latest-update/add",e)).data;x(!1),(0,m.WU)({message:a.message,displayClass:a.status})}catch(s){var a,t;(0,m.WU)({message:(null===(a=s.response.data)||void 0===a?void 0:a.message)||(null===(t=s.response)||void 0===t?void 0:t.message),displayClass:"failure"})}}(e),b(!1)},children:e=>{let{values:a,setFieldValue:t}=e;return(0,p.jsxs)(i.lV,{children:[(0,p.jsxs)("div",{className:"form-floating mb-3",children:[(0,p.jsxs)(i.D0,{id:"floatingType",name:"type",as:"select",value:a.type,className:"form-control",placeholder:"Type",children:[(0,p.jsx)("option",{value:"",children:"Select Type"}),(0,p.jsx)("option",{value:"PDF",children:"PDF"}),(0,p.jsx)("option",{value:"URL",children:"URL"})]}),(0,p.jsxs)("label",{htmlFor:"floatingType",children:[(0,p.jsx)("font",{color:"red",children:"* "}),"Type"]})]}),(0,p.jsx)(k,{name:"title",heading:"Title"}),"URL"==a.type&&(0,p.jsx)(k,{name:"link",heading:"Link"}),(0,p.jsx)("div",{className:"row",children:"PDF"==a.type&&(0,p.jsxs)("div",{className:"form-floating mb-3",children:[(0,p.jsx)("input",{id:"floatingFile",type:"file",accept:"application/pdf",className:"form-control",onChange:e=>{const a=e.currentTarget.files[0];if(a){if(!("application/pdf"===a.type||a.name.toLowerCase().endsWith(".pdf")))return alert("Please upload a valid PDF file."),void(e.target.value="");t("link",a)}}}),(0,p.jsxs)("label",{htmlFor:"floatingFile",children:[(0,p.jsx)("font",{color:"red",children:"* "}),"Select File"]})]})}),(0,p.jsx)("hr",{}),(0,p.jsxs)("div",{className:"text-center py-3",children:[(0,p.jsx)("button",{type:"submit",className:"btn btn-primary mx-2",disabled:j,children:j?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),"\xa0Loading..."]}):"Submit"}),(0,p.jsx)("button",{type:"button",className:"btn btn-danger mx-2",disabled:j,onClick:e=>x(!1),children:"Close"})]})]})}})})]}),(0,p.jsxs)(d.A,{show:y.modal,centered:!0,onHide:e=>f({modal:!1,data:""}),children:[(0,p.jsx)(d.A.Header,{children:(0,p.jsx)(d.A.Title,{children:"Delete"})}),(0,p.jsxs)(d.A.Body,{children:["Do you really want to delete ?",(0,p.jsx)("br",{}),"Title : ",(0,p.jsx)("b",{children:null===(e=y.data)||void 0===e?void 0:e.title})]}),(0,p.jsxs)(d.A.Footer,{children:[(0,p.jsx)("button",{type:"button",className:"btn btn-danger",onClick:e=>{!async function(e){try{await(0,m.Wi)(e.link);let a=(await r.A.delete("/latest-update/delete",{params:{id:e.id}})).data;f({modal:!1,data:""}),(0,m.WU)({message:a.message,displayClass:a.status})}catch(s){var a,t;(0,m.WU)({message:(null===(a=s.response.data)||void 0===a?void 0:a.message)||(null===(t=s.response)||void 0===t?void 0:t.message),displayClass:"failure"})}}(y.data)},children:"Delete"}),(0,p.jsx)("button",{type:"button",className:"btn btn-primary",onClick:e=>f({modal:!1,data:""}),children:"Cancel"})]})]})]});async function C(){try{let e=(await r.A.get("/admin/latest-update/listing")).data;t(null===e||void 0===e?void 0:e.data.sort(((e,a)=>e.order_id-a.order_id)).map(((e,a)=>({...e,srno:a+1,link2:(0,p.jsx)("a",{href:e.link.includes("http")?e.link:"https://mncsite.bynaricexam.com/data/"+e.link,target:"_blank",className:"text-decoration-none",rel:"noreferrer",children:e.link}),actions:(0,p.jsxs)("div",{className:"d-flex justify-content-evenly",children:[(0,p.jsx)("button",{type:"button",className:"btn btn-sm btn-warning",onClick:a=>{v(e),x(!0)},children:(0,p.jsx)(l.g,{icon:s.LFz})}),(0,p.jsx)("button",{type:"button",className:"btn btn-sm btn-danger ms-2",onClick:a=>f({modal:!0,data:e}),children:(0,p.jsx)(l.g,{icon:s.yLS})}),(0,p.jsx)("div",{className:"text-center p-1",children:(0,p.jsx)(o.A.Check,{defaultChecked:1===e.status,type:"switch",id:"custom-switch",onClick:a=>{!async function(e){try{let a=(await r.A.put("/latest-update/disable",e)).data;f({modal:!1,data:""}),(0,m.WU)({message:a.message,displayClass:a.status})}catch(s){var a,t;(0,m.WU)({message:(null===(a=s.response.data)||void 0===a?void 0:a.message)||(null===(t=s.response)||void 0===t?void 0:t.message),displayClass:"failure"})}}({id:e.id,status:a.target.checked?1:0})}})})]})}))))}catch(i){var e,a;(0,m.WU)({message:(null===(e=i.response.data)||void 0===e?void 0:e.message)||(null===(a=i.response)||void 0===a?void 0:a.message),displayClass:"failure"})}}}}}]);