"use strict";(self.webpackChunkmnc_frontend=self.webpackChunkmnc_frontend||[]).push([[696],{8696:(e,s,l)=>{l.r(s),l.d(s,{default:()=>p});var a=l(9324),t=l(4959),n=l(3939),i=l(9950),d=l(2902),o=l(2776),c=l(9262),r=l(7965),m=l(9671),u=l(1261),x=l(6030),h=l(4414);const p=()=>{var e;const s=e=>{if("string"===typeof e)try{return JSON.parse(e)}catch{return[]}return Array.isArray(e)?e:[]},[l,p]=(0,i.useState)([]),[j,b]=(0,i.useState)(""),[v,y]=(0,i.useState)(!1),[g,N]=(0,i.useState)(null),[k,f]=(0,i.useState)(!1),[A,w]=(0,i.useState)({modal:!1,data:""}),{categories:C}=(0,x.A)("circularTypes");(0,i.useEffect)((()=>{C.length&&D()}),[C,k,A]);const D=async()=>{try{const e=(await c.A.get("/admin/page-content/listing")).data.data||[],l=Object.fromEntries(C.map((e=>[String(e.value),e.label]))),n=e.map(((e,n)=>{const i=s(e.downloads),d=s(e.links);return{...e,srno:n+1,date:e.date?e.date.split("T")[0]:"",typeName:l[String(e.type)]||"N/A",downloadsArray:i,linksArray:d,downloadsDisplay:(0,h.jsx)("ul",{className:"mb-0",children:i.map(((e,s)=>(0,h.jsx)("li",{children:(0,h.jsxs)("a",{href:e.link,target:"_blank",rel:"noreferrer",children:[e.title," ",(0,h.jsx)(t.g,{icon:a.Ju_})]})},s)))}),linksDisplay:(0,h.jsx)("ul",{className:"mb-0",children:d.map(((e,s)=>(0,h.jsx)("li",{children:(0,h.jsxs)("a",{href:e.link,target:"_blank",rel:"noreferrer",children:[e.title," ",(0,h.jsx)(t.g,{icon:a.Ju_})]})},s)))}),actions:(0,h.jsxs)("div",{className:"d-flex justify-content-evenly",children:[(0,h.jsx)("button",{type:"button",className:"btn btn-sm btn-warning me-2",onClick:()=>{const l=s(e.downloads),a=s(e.links);N({...e,downloads:l,links:a,date:e.date?e.date.split("T")[0]:""}),f(!0)},children:(0,h.jsx)(t.g,{icon:a.LFz})}),(0,h.jsx)("button",{type:"button",className:"btn btn-sm btn-danger ms-2",onClick:()=>w({modal:!0,data:e}),children:(0,h.jsx)(t.g,{icon:a.yLS})}),(0,h.jsx)("div",{className:"text-center p-1",children:(0,h.jsx)(o.A.Check,{defaultChecked:1===e.status,type:"switch",onClick:s=>S(e.id,s.target.checked?1:0)})})]})}}));p(n)}catch(n){var e,l;(0,m.WU)({message:(null===n||void 0===n||null===(e=n.response)||void 0===e||null===(l=e.data)||void 0===l?void 0:l.message)||"Error fetching data",displayClass:"failure"})}},S=async(e,s)=>{try{await c.A.put("/page-content/disable",{id:e,status:s}),(0,m.WU)({message:"Status updated",displayClass:"success"})}catch(l){(0,m.WU)({message:"Error changing status",displayClass:"failure"})}};return(0,h.jsxs)("div",{className:"px-3",children:[(0,h.jsx)("div",{className:"text-center p-2",children:(0,h.jsx)("h3",{children:"Manage Page Content"})}),(0,h.jsxs)("button",{className:"btn btn-success rounded-5 mb-1",onClick:()=>{N(null),f(!0)},children:[(0,h.jsx)(t.g,{icon:a.QLR})," Add Page Content"]}),(0,h.jsx)("div",{className:"float-end",children:(0,h.jsxs)("select",{className:"form-select",onChange:e=>b(e.target.value),children:[(0,h.jsx)("option",{value:"",children:"All"}),C.sort(((e,s)=>e.value-s.value)).map(((e,s)=>(0,h.jsxs)("option",{value:e.value,children:[s+1," - ",e.label]},e.value)))]})}),l.length?(0,h.jsx)(u.A,{data:l.filter((e=>!j||e.type==j)),columns:[{text:"Sr.No.",dataField:"srno"},{text:"Date",dataField:"date"},{text:"Title",dataField:"title"},{text:"Main Url",dataField:"mainUrl"},{text:"Type",dataField:"typeName"},{text:"Description",dataField:"description"},{text:"Downloads",dataField:"downloadsDisplay"},{text:"Links",dataField:"linksDisplay"},{text:"Actions",dataField:"actions"}],keyField:"srno"}):(0,h.jsx)(r.A,{}),(0,h.jsxs)(d.A,{show:k,onHide:()=>f(!1),centered:!0,size:"lg",children:[(0,h.jsx)(d.A.Header,{className:"bgTheme text-light",children:(0,h.jsxs)(d.A.Title,{children:[g?"Edit":"Add"," Page Content"]})}),(0,h.jsx)(d.A.Body,{children:(0,h.jsx)(n.l1,{initialValues:{id:(null===g||void 0===g?void 0:g.id)||"",title:(null===g||void 0===g?void 0:g.title)||"",type:(null===g||void 0===g?void 0:g.type)||"",date:(null===g||void 0===g?void 0:g.date)||"",description:(null===g||void 0===g?void 0:g.description)||"",note:(null===g||void 0===g?void 0:g.note)||"",mainUrl:(null===g||void 0===g?void 0:g.mainUrl)||"",downloads:Array.isArray(null===g||void 0===g?void 0:g.downloads)?g.downloads:[],links:Array.isArray(null===g||void 0===g?void 0:g.links)?g.links:[]},onSubmit:async e=>{y(!0);try{const s={id:e.id,title:e.title,type:e.type,date:e.date?new Date(e.date).toISOString().split("T")[0]:"",description:e.description,note:e.note,mainUrl:e.mainUrl||[],downloads:e.downloads||[],links:e.links||[]};e.id?await c.A.put("/page-content/update",s):await c.A.post("/page-content/add",s),(0,m.WU)({message:"Saved successfully",displayClass:"success"}),f(!1),await D()}catch(a){var s,l;(0,m.WU)({message:(null===a||void 0===a||null===(s=a.response)||void 0===s||null===(l=s.data)||void 0===l?void 0:l.message)||"Failed to save",displayClass:"failure"})}y(!1)},enableReinitialize:!0,children:e=>{let{values:s,setFieldValue:l}=e;return(0,h.jsxs)(n.lV,{children:[(0,h.jsxs)("div",{className:"row g-3",children:[(0,h.jsxs)("div",{className:"col-md-6",children:[(0,h.jsx)("label",{children:"Type"}),(0,h.jsxs)(n.D0,{as:"select",name:"type",className:"form-control",children:[(0,h.jsx)("option",{value:"",children:"Select"}),C.map((e=>(0,h.jsx)("option",{value:e.value,children:e.label},e.value)))]})]}),(0,h.jsxs)("div",{className:"col-md-6",children:[(0,h.jsx)("label",{children:"Date"}),(0,h.jsx)(n.D0,{type:"date",name:"date",className:"form-control"})]}),(0,h.jsxs)("div",{className:"col-md-12",children:[(0,h.jsx)("label",{children:"Title"}),(0,h.jsx)(n.D0,{name:"title",className:"form-control"})]}),(0,h.jsxs)("div",{className:"col-md-12",children:[(0,h.jsx)("label",{children:"Main URL"}),(0,h.jsx)(n.D0,{name:"mainUrl",className:"form-control",placeholder:"Enter Main URL"})]}),(0,h.jsxs)("div",{className:"col-md-12",children:[(0,h.jsx)("label",{children:"Description"}),(0,h.jsx)(n.D0,{as:"textarea",name:"description",className:"form-control"})]}),(0,h.jsxs)("div",{className:"col-md-12",children:[(0,h.jsx)("label",{children:"Note"}),(0,h.jsx)(n.D0,{as:"textarea",name:"note",className:"form-control"})]}),(0,h.jsxs)("div",{className:"col-md-12",children:[(0,h.jsx)("label",{children:"Downloads"}),(0,h.jsx)(n.ED,{name:"downloads",children:e=>{let{push:l,remove:a}=e;return(0,h.jsxs)("div",{children:[s.downloads.map(((e,s)=>(0,h.jsxs)("div",{className:"d-flex gap-2 mb-2",children:[(0,h.jsx)(n.D0,{name:`downloads.${s}.title`,className:"form-control",placeholder:"Title"}),(0,h.jsx)(n.D0,{name:`downloads.${s}.link`,className:"form-control",placeholder:"Link"}),(0,h.jsx)("button",{type:"button",className:"btn btn-danger",onClick:()=>a(s),children:"X"})]},s))),(0,h.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>l({title:"",link:""}),children:"+ Add"})]})}})]}),(0,h.jsxs)("div",{className:"col-md-12",children:[(0,h.jsx)("label",{children:"Links"}),(0,h.jsx)(n.ED,{name:"links",children:e=>{let{push:l,remove:a}=e;return(0,h.jsxs)("div",{children:[s.links.map(((e,s)=>(0,h.jsxs)("div",{className:"d-flex gap-2 mb-2",children:[(0,h.jsx)(n.D0,{name:`links.${s}.title`,className:"form-control",placeholder:"Title"}),(0,h.jsx)(n.D0,{name:`links.${s}.link`,className:"form-control",placeholder:"Link"}),(0,h.jsx)("button",{type:"button",className:"btn btn-danger",onClick:()=>a(s),children:"X"})]},s))),(0,h.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>l({title:"",link:""}),children:"+ Add"})]})}})]})]}),(0,h.jsx)("hr",{}),(0,h.jsxs)("div",{className:"text-center mt-4",children:[(0,h.jsx)("button",{type:"submit",className:"btn btn-primary mx-2",disabled:v,children:v?"Saving...":"Submit"}),(0,h.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>f(!1),children:"Cancel"})]})]})}})})]}),(0,h.jsxs)(d.A,{show:A.modal,onHide:()=>w({modal:!1,data:""}),centered:!0,children:[(0,h.jsx)(d.A.Header,{children:(0,h.jsx)(d.A.Title,{children:"Delete Page Content"})}),(0,h.jsxs)(d.A.Body,{children:["Are you sure you want to delete ",(0,h.jsx)("b",{children:null===(e=A.data)||void 0===e?void 0:e.title}),"?"]}),(0,h.jsxs)(d.A.Footer,{children:[(0,h.jsx)("button",{className:"btn btn-danger",onClick:()=>(async e=>{try{await c.A.delete("/page-content/delete",{params:{id:e.id}}),(0,m.WU)({message:"Deleted successfully",displayClass:"success"}),w({modal:!1,data:""}),D()}catch(s){(0,m.WU)({message:"Failed to delete",displayClass:"failure"})}})(A.data),children:"Delete"}),(0,h.jsx)("button",{className:"btn btn-secondary",onClick:()=>w({modal:!1,data:""}),children:"Cancel"})]})]})]})}}}]);