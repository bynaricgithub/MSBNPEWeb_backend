"use strict";(self.webpackChunkmnc_frontend=self.webpackChunkmnc_frontend||[]).push([[889],{4889:(e,a,t)=>{t.r(a),t.d(a,{default:()=>p});var s=t(9324),l=t(4959),i=t(3939),n=t(9950),d=t(2902),r=t(2776),c=t(5385),o=t(7965),m=t(9671),u=t(1261),x=t(6030),h=t(4414);const p=()=>{var e;const[a,t]=(0,n.useState)(),[p,v]=(0,n.useState)(""),[j,g]=(0,n.useState)(!1),[y,b]=(0,n.useState)(),[f,N]=(0,n.useState)(!1),[k,C]=(0,n.useState)({modal:!1,data:""}),{categories:F}=(0,x.A)("circularTypes"),D=e=>{let{name:a,heading:t,values:s}=e;return(0,h.jsx)("div",{children:(0,h.jsxs)("div",{className:"form-floating mb-3",children:[(0,h.jsx)(i.D0,{id:"floating"+a,name:a,type:"text",className:"form-control",placeholder:a}),(0,h.jsx)("label",{htmlFor:"floating"+a,children:t}),(0,h.jsx)(i.Kw,{name:a,children:e=>(0,h.jsx)("span",{className:"text-danger font-12",children:e})})]})})};return(0,n.useEffect)((()=>{w()}),[f,k]),(0,h.jsxs)("div",{className:"px-3",children:[(0,h.jsx)("div",{className:"text-center p-2",children:(0,h.jsx)("h3",{children:"Manage Pages"})}),(0,h.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,h.jsxs)("button",{type:"button",className:"btn rounded-5 btn-success",onClick:e=>{b(!1),N(!0)},children:[(0,h.jsx)(l.g,{icon:s.QLR})," Add Tab Data"]}),(0,h.jsx)("div",{className:"float-end",children:(0,h.jsxs)("select",{className:"form-select",onChange:e=>v(e.target.value),children:[(0,h.jsx)("option",{value:"",children:"Filter"}),F.map((e=>(0,h.jsx)("option",{value:e.value,children:e.label},e.value)))]})})]}),(0,h.jsx)("div",{className:"depttableSection my-3",children:a?(null===a||void 0===a?void 0:a.length)>0&&(0,h.jsx)(u.A,{data:a.filter((e=>!p||e.type==p)),columns:[{text:"Sr.No.",dataField:"srno"},{text:"Date",dataField:"date"},{text:"Last Date",dataField:"last_date",type:"date"},{text:"Title",dataField:"title"},{text:"Department",dataField:"dept"},{text:"Institution or Organization",dataField:"inst"},{text:"Type",dataField:"type2"},{text:"PDF",dataField:"link2"},{text:"Order ID",dataField:"order_id"},{text:"Actions",dataField:"actions"}],keyField:"srno",headerClasses:"admin-allTable_header",sortingTable:"circulars",getData:w}):(0,h.jsx)(o.A,{})}),(0,h.jsxs)(d.A,{show:f,onHide:e=>N(!1),centered:!0,size:"lg",children:[(0,h.jsx)(d.A.Header,{className:"bgTheme text-light",children:(0,h.jsxs)(d.A.Title,{children:[" ",y?"Edit":"Add Content"]})}),(0,h.jsx)(d.A.Body,{children:(0,h.jsx)(i.l1,{initialValues:{id:(null===y||void 0===y?void 0:y.id)||"",title:(null===y||void 0===y?void 0:y.title)||"",date:(null===y||void 0===y?void 0:y.date)||"",last_date:(null===y||void 0===y?void 0:y.last_date)||"",dept:(null===y||void 0===y?void 0:y.dept)||"",inst:(null===y||void 0===y?void 0:y.inst)||"",type:(null===y||void 0===y?void 0:y.type)||"",link:"",linkName:""},enableReinitialize:!0,onSubmit:e=>{y?async function(e){g(!0),e.link&&(await(0,m.Wi)(y.link),e.link=await(0,m.aj)(e.link,"circulars"));delete e.linkName;try{let a=(await c.A.put("/circular/update",e)).data;N(!1),(0,m.WU)({message:a.message,displayClass:a.status})}catch(s){var a,t;(0,m.WU)({message:(null===(a=s.response.data)||void 0===a?void 0:a.message)||(null===(t=s.response)||void 0===t?void 0:t.message),displayClass:"failure"})}g(!1)}({...e}):async function(e){if(g(!0),!e.link)return(0,m.WU)({message:"Please Select a File.",displayClass:"danger"}),g(!1),null;e.link=await(0,m.aj)(e.link,"circulars"),delete e.linkName;try{let a=(await c.A.post("/circular/add",e)).data;N(!1),(0,m.WU)({message:a.message,displayClass:a.status})}catch(s){var a,t;(0,m.WU)({message:(null===(a=s.response.data)||void 0===a?void 0:a.message)||(null===(t=s.response)||void 0===t?void 0:t.message),displayClass:"failure"})}g(!1)}({...e})},children:e=>{let{values:a,handleChange:t,setFieldValue:s}=e;return(0,h.jsxs)(i.lV,{children:[(0,h.jsx)("div",{className:"col-sm-12",children:(0,h.jsxs)("div",{className:"form-floating mb-3",children:[(0,h.jsxs)(i.D0,{id:"floatingType",name:"type",as:"select",value:a.type,className:"form-control",placeholder:"Type",children:[(0,h.jsxs)("option",{value:"",disabled:!0,children:[" ","Select"," "]}),null===F||void 0===F?void 0:F.map(((e,a)=>(0,h.jsx)("option",{value:e.value,children:e.label},a)))]}),(0,h.jsx)("label",{htmlFor:"floatingType",children:"Select Type"})]})}),(0,h.jsx)(D,{name:"title",heading:"Title"}),1==a.type&&(0,h.jsx)(D,{name:"dept",heading:"Department"}),["1","2"].includes(a.type)&&(0,h.jsx)(D,{name:"inst",heading:1==a.type?"Institution":2==a.type?"Organization":""}),(0,h.jsxs)("div",{className:"row",children:[(0,h.jsx)("div",{className:"col-sm-6",children:(0,h.jsxs)("div",{className:"form-floating mb-3",children:[(0,h.jsx)(i.D0,{id:"floatingDate",name:"date",type:"date",value:a.date,className:"form-control"}),(0,h.jsx)("label",{htmlFor:"floatingDate",children:"Select Date"}),(0,h.jsx)(i.Kw,{name:"date",children:e=>(0,h.jsx)("span",{className:"text-danger font-12",children:e})})]})}),2==a.type&&(0,h.jsx)("div",{className:"col-sm-6",children:(0,h.jsxs)("div",{className:"form-floating mb-3",children:[(0,h.jsx)(i.D0,{id:"floatingDate1",name:"last_date",type:"date",value:a.last_date,className:"form-control"}),(0,h.jsx)("label",{htmlFor:"floatingDate1",children:"Select Last Date"}),(0,h.jsx)(i.Kw,{name:"last_date",children:e=>(0,h.jsx)("span",{className:"text-danger font-12",children:e})})]})}),(0,h.jsx)("div",{className:"col-sm-6",children:(0,h.jsxs)("div",{className:"form-floating mb-3",children:[(0,h.jsx)(i.D0,{id:"floatingLink",name:"linkName",type:"file",onChange:e=>{t(e),s("link",e.currentTarget.files[0])},value:a.linkName,className:"form-control",accept:".pdf"}),(0,h.jsx)("label",{htmlFor:"floatingLink",children:"PDF File"}),(0,h.jsx)(i.Kw,{name:"link",children:e=>(0,h.jsx)("span",{className:"text-danger font-12",children:e})})]})})]}),(0,h.jsx)("hr",{}),(0,h.jsxs)("div",{className:"text-center py-3",children:[(0,h.jsx)("button",{type:"submit",className:"btn btn-primary mx-2",disabled:j,children:j?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),"\xa0Loading..."]}):"Submit"}),(0,h.jsx)("button",{type:"button",className:"btn btn-danger mx-2",onClick:e=>N(!1),disabled:j,children:"Cancel"})]})]})}})})]}),(0,h.jsxs)(d.A,{show:k.modal,centered:!0,onHide:e=>C({modal:!1,data:""}),children:[(0,h.jsx)(d.A.Header,{children:(0,h.jsx)(d.A.Title,{children:"Delete"})}),(0,h.jsxs)(d.A.Body,{children:["Do you really want to delete ?",(0,h.jsx)("br",{}),"Title : ",(0,h.jsx)("b",{children:null===(e=k.data)||void 0===e?void 0:e.title})]}),(0,h.jsxs)(d.A.Footer,{children:[(0,h.jsx)("button",{type:"button",className:"btn btn-danger",onClick:e=>{!async function(e){try{await(0,m.Wi)(e.link);let a=(await c.A.delete("/circular/delete",{params:{id:e.id}})).data;C({modal:!1,data:""}),(0,m.WU)({message:a.message,displayClass:a.status})}catch(s){var a,t;(0,m.WU)({message:(null===(a=s.response.data)||void 0===a?void 0:a.message)||(null===(t=s.response)||void 0===t?void 0:t.message),displayClass:"failure"})}}(k.data)},children:"Delete"}),(0,h.jsx)("button",{type:"button",className:"btn btn-primary",onClick:e=>C({modal:!1,data:""}),children:"Cancel"})]})]})]});async function w(){try{let e=(await c.A.get("/admin/circular/listing")).data;t(null===e||void 0===e?void 0:e.data.sort(((e,a)=>e.order_id-a.order_id)).map(((e,a)=>{var t;return{...e,srno:a+1,type2:e.type?null===(t=F[e.type-1])||void 0===t?void 0:t.label:"",link2:(0,h.jsxs)("a",{href:"https://mncsite.bynaricexam.com/data/"+e.link,target:"_blank",className:"text-decoration-none",rel:"noreferrer",children:["Open PDF ",(0,h.jsx)(l.g,{icon:s.Ju_})]}),actions:(0,h.jsxs)("div",{className:"d-flex justify-content-evenly",children:[(0,h.jsx)("button",{type:"button",className:"btn btn-sm btn-warning",onClick:a=>{b(e),N(!0)},children:(0,h.jsx)(l.g,{icon:s.LFz})}),(0,h.jsx)("button",{type:"button",className:"btn btn-sm btn-danger ms-2",onClick:a=>C({modal:!0,data:e}),children:(0,h.jsx)(l.g,{icon:s.yLS})}),(0,h.jsx)("div",{className:"text-center p-1",children:(0,h.jsx)(r.A.Check,{defaultChecked:1===e.status,type:"switch",id:"custom-switch",onClick:a=>{!async function(e){try{let a=(await c.A.put("/circular/disable",e)).data;C({modal:!1,data:""}),(0,m.WU)({message:a.message,displayClass:a.status})}catch(s){var a,t;(0,m.WU)({message:(null===(a=s.response.data)||void 0===a?void 0:a.message)||(null===(t=s.response)||void 0===t?void 0:t.message),displayClass:"failure"})}}({id:e.id,status:a.target.checked?1:0})}})})]})}})))}catch(n){var e,a,i;(0,m.WU)({message:(null===n||void 0===n||null===(e=n.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.message)||(null===(i=n.response)||void 0===i?void 0:i.message),displayClass:"failure"})}}}}}]);